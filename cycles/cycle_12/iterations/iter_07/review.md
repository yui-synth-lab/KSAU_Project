# Review — Iteration 7: MODIFY

**査読日:** 2026年02月25日
**判定:** MODIFY

## 却下・修正要求の理由

### [問題1]: SSoT 定義および物理公式との不整合
**深刻度:** 致命的
**該当箇所:** `dm_summary.py:59`
**問題の内容:** TSI（幾何学的安定性指数）の計算において、ロードマップおよび SSoT で定義された公式 `$n \cdot u / |s|$` ではなく、独自の `$n + u + |s|$` を使用している。これは H28 の制約事項「TSI の定義は既存の SSoT 定義を維持し、恣意的な変更を禁止する」に対する重大な違反である。
**要求する対応:** SSoT 定義に準拠した公式を使用すること。また、分母が 0 になる場合の物理的処理（正則化等）についても理論的根拠を明記すること。

### [問題2]: SSoT パス解決ルールの不履行
**深刻度:** 重大
**該当箇所:** `dm_narrowing_fpr.py:12`, `dm_summary.py:12`
**問題の内容:** `Path(__file__).parents[5]` を用いてプロジェクトルートを推測・再構築している。`gemini.md` コーディング規約では「自分でパスを推測・再構築してはならない」「プロンプトで明示された絶対パスをそのまま変数に代入すること」と定められている。
**要求する対応:** プロンプトに記載された `E:\Obsidian\KSAU_Project\ssot` を `SSOT_DIR` 変数に直接代入して使用すること。

### [問題3]: マジックナンバーの混在と虚偽申告
**深刻度:** 重大
**該当箇所:** `dm_summary.py:32-34`, `results.json`
**問題の内容:** 質量公式の係数計算において `7.0` や `10.0` といったマジックナンバーを直接記述している。これらは SSoT の `dimensions` (bulk_total, bulk_compact) から取得すべき定数である。また、これらが存在するにもかかわらず `results.json` の `hardcoded_values_found` を `false` としている点は、科学的誠実さの観点から容認できない。
**要求する対応:** 全ての定数を SSoT から取得し、`results.json` の申告を正確に行うこと。

### [問題4]: タスク順序の無視
**深刻度:** 軽微
**該当箇所:** `roadmap.md`
**問題の内容:** ロードマップ Row 6（Jones/Homfly 分析）が依然として `[ ]`（未完了・未承認）の状態で、Row 7 および Row 10 を進めている。
**要求する対応:** Row 6 の修正再提出が承認されるまでは、後続タスクの完了を宣言しないこと。

## 統計指標
- p 値（観測）: 0.0 (FPR 検定)
- Bonferroni 補正後閾値: 0.016666
- FPR: 0.0000
- 判定根拠: 統計的には有意（FPR < 1%）であるが、実装の SSoT 準拠性および論理的整合性に重大な欠陥があるため、修正を要求する。
